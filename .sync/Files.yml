# Specifies the files synced from Mu DevOps to other Project Mu repositories.
#
# This file is meant to ensure common configuration across Project Mu repos that is centralized in Mu DevOps.
#
# Files are contributed directly in Mu DevOps by the original author and then automatically synced after the PR
# in Mu DevOps is merged by UEFI Bot to all of the repos specified in this file.
#
# To maintain consistency across Project Mu, always consider if a configuration/settings file is appropriate as
# a common file in Mu DevOps or should be repo-specific.
#
# Copyright (c) Microsoft Corporation.
# SPDX-License-Identifier: BSD-2-Clause-Patent
#
# For more information, see:
# https://github.com/BetaHuhn/repo-file-sync-action

# Maintenance: Keep labels groups in ascending alphabetical order - easier to scan, identify duplicates, etc.

# Azure Pipelines - Common Configs
#
# These files leverage a high degree of common build template reuse from Mu DevOps. It is preferred that repos
# use the common templates for pipelines and adjust template parameter inputs as needed for a specific repo. However,
# a repo can always be removed from this list and manage its pipeline YAML files completely independently if absolutely
# necessary.
#
# Note: The fact that these files are copied to a repo does not mean that the repo has pipelines
#       set up to use the YAML file. The file is simply available for pipelines to be connected
#       if needed.
group:
# Azure Pipelines - Custom - makubacki/mu_feature_config
  # - files:
  #   - source: .sync/azure_pipelines/custom/mu_feature_config/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/custom/mu_feature_config/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_feature_config

# Azure Pipelines - Custom - makubacki/mu_feature_ipmi
  # - files:
  #   - source: .sync/azure_pipelines/custom/mu_feature_ipmi/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/custom/mu_feature_ipmi/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_feature_ipmi

# Azure Pipelines - Custom - makubacki/mu_feature_mm_supv
  # - files:
  #   - source: .sync/azure_pipelines/custom/mu_feature_mm_supv/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/custom/mu_feature_mm_supv/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_feature_mm_supv

# Azure Pipelines - Custom - makubacki/mu_oem_sample
  # - files:
  #   - source: .sync/azure_pipelines/custom/mu_oem_sample/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/custom/mu_oem_sample/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_oem_sample

# Azure Pipelines - Custom - makubacki/mu_tiano_platforms
  # - files:
  #   - source: .sync/azure_pipelines/custom/mu_tiano_platforms/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/custom/mu_tiano_platforms/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_tiano_platforms

# Azure Pipelines - Matrix Dependent - All
  - files:
    - source: .sync/azure_pipelines/matrix_dependent/Ubuntu-CLANGPDB.yml
      dest: .azurepipelines/Ubuntu-CLANGPDB.yml
      template: true
    - source: .sync/azure_pipelines/matrix_dependent/Ubuntu-GCC5.yml
      dest: .azurepipelines/Ubuntu-GCC5.yml
      template: true
    - source: .sync/azure_pipelines/matrix_dependent/Windows-CLANGPDB.yml
      dest: .azurepipelines/Windows-CLANGPDB.yml
      template: true
    - source: .sync/azure_pipelines/matrix_dependent/Windows-VS.yml
      dest: .azurepipelines/Windows-VS.yml
      template: true
    repos: |
      makubacki/mu_tiano_plus

# Azure Pipelines - Matrix Dependent - GCC & VS Only
  # - files:
  #   - source: .sync/azure_pipelines/matrix_dependent/Ubuntu-GCC5.yml
  #     dest: .azurepipelines/Ubuntu-GCC5.yml
  #     template: true
  #   - source: .sync/azure_pipelines/matrix_dependent/Windows-VS.yml
  #     dest: .azurepipelines/Windows-VS.yml
  #     template: true
  #   repos: |
  #     makubacki/mu_plus

# CI Configuration - Markdown Lint
  - files:
    - source: .sync/ci_config/.markdownlint.yaml
      dest: .markdownlint.yaml
      template:
        allowed_elements:
          - br
          - center
          - img
    repos: |
      makubacki/mu_tiano_plus

  # - files:
  #   - source: .sync/ci_config/.markdownlint.yaml
  #     dest: .markdownlint.yaml
  #     template:
  #       allowed_elements:
  #         - br
  #   repos: |
  #     makubacki/mu_plus

# dependabot - Track GitHub Actions and PIP Modules
  - files:
    - source: .sync/dependabot/actions-pip.yml
      dest: .github/dependabot.yml
    repos: |
      makubacki/mu_tiano_plus

# # dependabot - Track GitHub Actions, PIP Modules, and Git Submodules
#   - files:
#     - source: .sync/dependabot/actions-pip-submodules.yml
#       dest: .github/dependabot.yml
#     repos: |
#       makubacki/mu_tiano_platforms

# GitHub Templates - Contributing
  - files:
    - source: .sync/github_templates/contributing/CONTRIBUTING.md
      dest: CONTRIBUTING.md
    repos: |
      makubacki/mu_tiano_plus

# GitHub Templates - Issues
#
# Note: This "ISSUE_TEMPLATE" directory is synced as-is
  - files:
    - source: .sync/github_templates/ISSUE_TEMPLATE/
      dest: .github/ISSUE_TEMPLATE/
    repos: |
      makubacki/mu_tiano_plus

# Leaf Workflow - Apply Labels
  - files:
    - source: .sync/workflows/leaf/label-issues.yml
      dest: .github/workflows/label-issues.yml
      template: true
    - source: .sync/workflows/config/label-issues/file-paths.yml
      dest: .github/workflows/label-issues/file-paths.yml
    - source: .sync/workflows/config/label-issues/regex-pull-requests.yml
      dest: .github/workflows/label-issues/regex-pull-requests.yml
    repos: |
      makubacki/mu_tiano_plus

# Leaf Workflow - Label Sync
  - files:
    - source: .sync/workflows/leaf/label-sync.yml
      dest: .github/workflows/label-sync.yml
      template: true
    repos: |
      makubacki/mu_tiano_plus

# Leaf Workflow - Mark Stale Issues and Pull Requests
  - files:
    - source: .sync/workflows/leaf/stale.yml
      dest: .github/workflows/stale.yml
      template: true
    repos: |
      makubacki/mu_tiano_plus

# # Leaf Workflow - Mark Stale Issues and Pull Requests (Mu DevOps Adjustment)
# # Prevents the reusable workflow file from being overwritten by the leaf workflow
# # file in Mu DevOps.
#   - files:
#     - source: .sync/workflows/leaf/stale.yml
#       dest: .github/workflows/stale-leaf.yml
#     repos: |
#       makubacki/mu_devops

# Pull Request Template - Common Template
  - files:
    - source: .sync/github_templates/pull_requests/pull_request_template.md
      dest: .github/pull_request_template.md
    repos: |
      makubacki/mu_tiano_plus
